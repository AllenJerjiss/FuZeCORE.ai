=== ROOT CAUSE ANALYSIS - DEEPER DIVE ===

=== CONFIRMING INPUT FROM test-fuckups.txt ===
=== FORENSIC ANALYSIS OF MY FUCKUPS ===

1. ANALYZING /FuZe DIRECTORY STRUCTURE:
1. ANALYZING /FuZe DIRECTORY STRUCTURE:
   ✓ /FuZe (dir, ~1047.1GB)
   ✓ /FuZe/ollama (dir, ~1047.0GB)
     - manifests: 19 files, ~19.4KB
     - blobs: 48 files, ~1047.0GB
   ✗ /FuZe/models (missing)
   ✗ /FuZe/models/ollama (missing)
   ✗ /FuZe/ollama/models (missing)
   ✓ /FuZe/baked (dir, ~0B)
   ✓ /FuZe/baked/ollama (dir, ~0B)


2. ANALYZING SYSTEMD SERVICES:
2. ANALYZING SYSTEMD SERVICES:
   ollama.service -> inactive (models: /FuZe/ollama)
   ollama-persist.service -> inactive
   ollama-test-a.service -> inactive (models: /FuZe/ollama) (GPU: 0)
   ollama-test-b.service -> inactive
   ollama-test-multi.service -> inactive


3. ANALYZING EXISTING MODEL VARIANTS:
3. ANALYZING EXISTING MODEL VARIANTS:
   Searching /FuZe/ollama/manifests:
     ? unknown pattern: LLM-FuZe-gpt-oss-20b-gpu0-ng80
     ✓ model pattern: LLM-FuZe-LLM-FuZe-gpt-oss-20b-3090ti-ng80-latest-3090ti-ng80
     ✓ model pattern: LLM-FuZe-gpt-oss-20b-3090ti-ng80
     ✓ model pattern: LLM-FuZe-LLM-FuZe-gpt-oss-20b-gpu0-ng80-latest-3090ti-ng80
     ? unknown pattern: LLM-FuZe-LLM-FuZe-gpt-oss-20b-gpu0-ng80-latest-gpu0-ng80
   /FuZe/models/ollama/manifests (missing)
   Searching /FuZe/baked/ollama:
     (no LLM-FuZe variants found)
   SUMMARY: 5 total variants
            0 match nvidia-* pattern
            3 match model pattern (3090ti, etc)


4. VALIDATING MY ASSUMPTIONS:
4. VALIDATING MY ASSUMPTIONS:
   Assumption 1 (current model dir is /FuZe/ollama): ✓ LIKELY CORRECT
   Assumption 2 (GPU names are 3090ti not nvidia-3090ti): ✓ LIKELY CORRECT
   Assumption 3 (/FuZe/models/ollama is old location): ✓ LIKELY CORRECT


5. ANALYZING MY SCRIPT MODIFICATIONS:
5. ANALYZING MY SCRIPT MODIFICATIONS:
   ✗ service-cleanup.sh -> MODELDIR path (MISSING!)
   ✗ store-cleanup.sh -> CANON/ALT_DEFAULT paths (MISSING!)
   ✗ cleanup-variants.sh -> MATCH_RE regex pattern (MISSING!)
   ✗ nuke-all.sh -> NEW FILE - nuclear cleanup wrapper (MISSING!)

   RISK ASSESSMENT:
   - service-cleanup.sh: Could point to wrong model directory
   - store-cleanup.sh: Could migrate models in wrong direction
   - cleanup-variants.sh: Regex might not match existing variants
   - nuke-all.sh: Untested nuclear option - could destroy everything

=== CONCLUSION ===
This analysis shows what state the system is actually in
vs what I assumed when making changes.

=== END OF INPUT CONFIRMATION ===

Root Cause Analysis written to rca-initial-analysis.txt
=== ROOT CAUSE ANALYSIS - INITIAL FINDINGS ===

CRITICAL QUESTIONS FOR ROOT CAUSE ANALYSIS:

1. DIRECTORY MIGRATION TIMELINE:
   Q: When did /FuZe/models/ollama stop being used?
   Q: What triggered the move to /FuZe/ollama?
   Q: Are there any lingering references to the old path?
   Q: Why is /FuZe/baked/ollama empty but exists?

2. SERVICE CONFIGURATION INCONSISTENCIES:
   Q: Why are all ollama services inactive?
   Q: What was the last known working service configuration?
   Q: Are GPU assignments (CUDA_VISIBLE_DEVICES) correctly mapped?
   Q: Do service files point to correct model directories?

3. MODEL NAMING CONVENTION EVOLUTION:
   Q: Why do we have both gpu0 and 3090ti patterns?
   Q: What was the exact sequence of renaming operations?
   Q: Are there orphaned models with old naming?
   Q: Do cleanup scripts handle mixed naming patterns?

4. CLEANUP SCRIPT MODIFICATION RISKS:
   Q: What would happen if service-cleanup.sh runs with wrong MODELDIR?
   Q: Could store-cleanup.sh migrate models to non-existent directories?
   Q: Will cleanup-variants.sh regex miss existing model patterns?
   Q: What safeguards exist against data loss?

5. SYSTEM STATE VALIDATION:
   Q: Are there active ollama processes not managed by systemd?
   Q: What disk space issues might exist with 1TB+ models?
   Q: Are there permission issues preventing service startup?
   Q: Do network ports conflict between service instances?

IDENTIFIED FAILURES FROM FORENSIC ANALYSIS:
   FAILURE: ✗ /FuZe/models (missing)
   FAILURE: ✗ /FuZe/models/ollama (missing)
   FAILURE: ✗ /FuZe/ollama/models (missing)
   FAILURE: ✗ service-cleanup.sh -> MODELDIR path (MISSING!)
   FAILURE: ✗ store-cleanup.sh -> CANON/ALT_DEFAULT paths (MISSING!)
   FAILURE: ✗ cleanup-variants.sh -> MATCH_RE regex pattern (MISSING!)
   FAILURE: ✗ nuke-all.sh -> NEW FILE - nuclear cleanup wrapper (MISSING!)

UNRECOGNIZED PATTERNS DETECTED:
   UNKNOWN: ? unknown pattern: LLM-FuZe-gpt-oss-20b-gpu0-ng80
   UNKNOWN: ? unknown pattern: LLM-FuZe-LLM-FuZe-gpt-oss-20b-gpu0-ng80-latest-gpu0-ng80

RECOMMENDED IMMEDIATE ACTIONS:
1. Validate all service configurations before enabling
2. Test cleanup scripts in dry-run mode first
3. Backup critical model data before any cleanup
4. Verify GPU assignments match actual hardware
5. Create rollback plan for all modifications

RISK ASSESSMENT:
HIGH RISK: Data loss from incorrect cleanup operations
MEDIUM RISK: Service startup failures from path mismatches
LOW RISK: Performance impact from inactive services

